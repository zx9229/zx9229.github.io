<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>python安装cx_Oracle | zx9229.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="摘要暂略。">
<meta property="og:type" content="article">
<meta property="og:title" content="python安装cx_Oracle">
<meta property="og:url" content="http://zx9229.github.io/2018/07/03/python安装cx-Oracle/index.html">
<meta property="og:site_name" content="zx9229.github.io">
<meta property="og:description" content="摘要暂略。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-08-03T10:32:25.845Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python安装cx_Oracle">
<meta name="twitter:description" content="摘要暂略。">
  
    <link rel="alternate" href="/atom.xml" title="zx9229.github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">zx9229.github.io</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zx9229.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-python安装cx-Oracle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/03/python安装cx-Oracle/" class="article-date">
  <time datetime="2018-07-03T13:21:09.000Z" itemprop="datePublished">2018-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>►<a class="article-category-link" href="/categories/Linux/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python安装cx_Oracle
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>摘要暂略。<br><a id="more"></a></p>
<p>现在(2018-07)cx_Oracle不论在Windows还是Linux下，都可以<code>pip install cx_Oracle</code>了。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装python3</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install epel-release</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install python34</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install python34-devel</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install python34-setuptools</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> easy_install-3.4 pip</span></span><br><span class="line">pip install cx_Oracle</span><br><span class="line">pip list | grep -i oracle  # 查看(cx-Oracle)(cx_Oracle)的版本号</span><br></pre></td></tr></table></figure></p>
<p>然后可以使用如下代码进行测试：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cx_Oracle</span><br><span class="line">host = <span class="string">'192.168.1.101'</span></span><br><span class="line">port = <span class="number">1521</span></span><br><span class="line">SID = <span class="string">'SID_NAME'</span></span><br><span class="line">dsn_tns = cx_Oracle.makedsn(host, port, SID)</span><br><span class="line">connection = cx_Oracle.connect(<span class="string">'用户名'</span>, <span class="string">'密码'</span>, dsn_tns)</span><br><span class="line">connection.close()</span><br><span class="line">print(<span class="string">"DONE."</span>)</span><br><span class="line">exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p>
<p>首先，你会看到如下错误提示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cx_Oracle.DatabaseError: DPI-1047: 64-bit Oracle Client library cannot be loaded: &quot;libclntsh.so: cannot open shared object file: No such file or directory&quot;. See https://oracle.github.io/odpi/doc/installation.html#linux for help</span><br></pre></td></tr></table></figure></p>
<p>很显然需要去<code>https://oracle.github.io/odpi/doc/installation.html#linux</code>寻求帮助。<br>我本着“能不yum就不yum”的个人偏好，倾向于选择<code>Oracle Instant Client Zip</code>。<br>我倾向于下载<code>Oracle 11</code>的压缩包<code>instantclient-basic-linux.x64-11.2.0.4.0.zip</code>，因为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Version 12.2 client libraries can connect to Oracle Database 11.2 or greater. Version 12.1 client libraries can connect to Oracle Database 10.2 or greater. Version 11.2 client libraries can connect to Oracle Database 9.2 or greater.</span><br></pre></td></tr></table></figure></p>
<p>所以，(解决这个错误的)全部过程就是<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/oracle_instantclient</span><br><span class="line">mv  ./instantclient-basic-linux.x64-11.2.0.4.0.zip /opt/oracle_instantclient/.</span><br><span class="line">unzip instantclient-basic-linux.x64-11.2.0.4.0.zip</span><br><span class="line">yum install libaio libaio1</span><br><span class="line">LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/oracle_instantclient/instantclient_11_2</span><br></pre></td></tr></table></figure></p>
<p>然后执行测试代码，会发现错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cx_Oracle.DatabaseError: ORA-21561: OID generation failed</span><br></pre></td></tr></table></figure></p>
<p>经搜索，原因是“<code>hostname</code>显示的主机名和<code>/etc/hosts</code>配置文件里的主机名不一致”。你可以<code>man hostname</code>和<code>man hosts</code>查看帮助文档。<br>所以我们可以任改其一。我选择了修改配置文件。备份配置文件并修改后，测试代码正常运行。</p>
<p>最后，cx_Oracle的帮助文档在<a href="http://cx-oracle.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">Welcome to cx_Oracle’s documentation!</a>。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zx9229.github.io/2018/07/03/python安装cx-Oracle/" data-id="cjrlv9esl00430kprjvh8d5g2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/07/09/git的一些命令备忘/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          git的一些命令备忘
        
      </div>
    </a>
  
  
    <a href="/2018/06/29/shell中嵌入二进制文件/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">shell中嵌入二进制文件</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/shell/">shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyDefaultCategory/">MyDefaultCategory</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Qt/">Qt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/RaspberryPi/">RaspberryPi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/MSVC/">MSVC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/powershell/">powershell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kali/">kali</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/Ansible/">Ansible</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/28/Windows快捷方式、硬链接、软连接、符号链接/">Windows快捷方式、硬链接、软连接、符号链接</a>
          </li>
        
          <li>
            <a href="/2019/01/28/Win10系统安装相关/">Win10系统安装相关</a>
          </li>
        
          <li>
            <a href="/2019/01/26/go-sqlite3在Windows下的使用/">go-sqlite3在Windows下的使用</a>
          </li>
        
          <li>
            <a href="/2019/01/26/Qt-For-Android配置/">Qt-For-Android配置</a>
          </li>
        
          <li>
            <a href="/2019/01/25/vlmcsd相关/">vlmcsd相关</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 zx9229<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>