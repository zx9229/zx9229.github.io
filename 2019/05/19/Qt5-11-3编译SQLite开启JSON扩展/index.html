<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Qt5.11.3编译SQLite开启JSON扩展 | zx9229.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="略。">
<meta name="keywords" content="Qt,SQLite">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt5.11.3编译SQLite开启JSON扩展">
<meta property="og:url" content="http://zx9229.github.io/2019/05/19/Qt5-11-3编译SQLite开启JSON扩展/index.html">
<meta property="og:site_name" content="zx9229.github.io">
<meta property="og:description" content="略。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-05-18T18:44:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Qt5.11.3编译SQLite开启JSON扩展">
<meta name="twitter:description" content="略。">
  
    <link rel="alternate" href="/atom.xml" title="zx9229.github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">zx9229.github.io</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zx9229.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Qt5-11-3编译SQLite开启JSON扩展" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/19/Qt5-11-3编译SQLite开启JSON扩展/" class="article-date">
  <time datetime="2019-05-18T16:31:45.000Z" itemprop="datePublished">2019-05-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Qt/">Qt</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Qt5.11.3编译SQLite开启JSON扩展
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>略。<br><a id="more"></a></p>
<ul>
<li><p>参考<br><a href="https://bugreports.qt.io/browse/QTBUG-63498" target="_blank" rel="noopener">Qt5.9 build-in SQLite 3.16 not support JSON1 Extension</a>。<br><a href="https://bugreports.qt.io/browse/QTBUG-70972" target="_blank" rel="noopener">Allow sqlite extensions</a>。<br><a href="https://blog.csdn.net/chinley/article/details/77711971" target="_blank" rel="noopener">Qt 5.9.1 (MinGW) 编译MySQL驱动的步骤</a>。<br><a href="https://www.sqlite.org/json1.html" target="_blank" rel="noopener">The JSON1 Extension</a>。<br><code>C:\Qt\Qt5.11.3\Docs\Qt-5.11.3\qtsql\sql-driver.html</code>。<br>在<code>Assistant</code>的<code>搜索</code>这个Tab页里面检索<code>SQLITE3_PREFIX</code>而找到的内容。  </p>
</li>
<li><p>可能涉及的参考路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Qt\Qt5.11.3\5.11.3\mingw53_32\plugins\sqldrivers\</span><br><span class="line">C:\Qt\Qt5.11.3\5.11.3\Src\qtbase\src\3rdparty\sqlite.pri</span><br><span class="line">C:\Qt\Qt5.11.3\5.11.3\Src\qtbase\src\3rdparty\sqlite\sqlite3.c</span><br><span class="line">C:\Qt\Qt5.11.3\5.11.3\Src\qtbase\src\3rdparty\sqlite\sqlite3.h</span><br><span class="line">C:\Qt\Qt5.11.3\5.11.3\Src\qtbase\src\plugins\sqldrivers\configure.json</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p>下载编译用途的SQLite源码<br>略。</p>
</li>
<li><p>确认自己的Qt版本<br>我的版本为Qt5.11.3。相关路径为<code>C:\Qt\Qt5.11.3\5.11.3\Src\qtbase\src\plugins\sqldrivers\sqlite\sqlite.pro</code>。</p>
</li>
<li><p>下载对应版本的<code>qtbase</code>部分的源码<br><a href="http://download.qt.io/archive/qt/5.11/5.11.3/submodules/qtbase-everywhere-src-5.11.3.tar.xz" target="_blank" rel="noopener">qtbase-everywhere-src-5.11.3.tar.xz</a>。</p>
</li>
<li><p>解压到指定目录<br>比如我将其解压并匹配到<code>E:\qtbase-everywhere-src-5.11.3\src\plugins\sqldrivers\sqlite\sqlite.pro</code>。<br>此时，我们即将涉及到以下文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">E:\qtbase-everywhere-src-5.11.3\src\3rdparty\sqlite.pri</span><br><span class="line">E:\qtbase-everywhere-src-5.11.3\src\3rdparty\sqlite\sqlite3.c</span><br><span class="line">E:\qtbase-everywhere-src-5.11.3\src\3rdparty\sqlite\sqlite3.h</span><br><span class="line">E:\qtbase-everywhere-src-5.11.3\src\plugins\sqldrivers\configure.json</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改<code>sqlite.pri</code>文件<br>删除<code>SQLITE_OMIT_LOAD_EXTENSION</code>增加<code>SQLITE_ENABLE_JSON1</code>。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> DEFINES += SQLITE_ENABLE_COLUMN_METADATA SQLITE_OMIT_LOAD_EXTENSION SQLITE_OMIT_COMPLETE SQLITE_ENABLE_FTS3 SQLITE_ENABLE_FTS3_PARENTHESIS SQLITE_ENABLE_FTS5 SQLITE_ENABLE_RTREE</span><br><span class="line">DEFINES   += SQLITE_ENABLE_COLUMN_METADATA                            SQLITE_OMIT_COMPLETE SQLITE_ENABLE_FTS3 SQLITE_ENABLE_FTS3_PARENTHESIS SQLITE_ENABLE_FTS5 SQLITE_ENABLE_RTREE SQLITE_ENABLE_JSON1</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新<code>sqlite3.c</code>和<code>sqlite3.h</code>文件<br>将下载好的SQLite源码覆盖过去。</p>
</li>
<li><p>修改<code>configure.json</code>文件<br>此步骤为可选项。将<code>summary</code>备份为<code>summary.bak</code>，创建<code>summary</code>仅保留sqlite的配置。然后执行默认编译操作，这样(或许)可以编译较少的组件：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    "summary.bak": [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"section"</span>: <span class="string">"Qt Sql"</span>,</span><br><span class="line">            <span class="attr">"entries"</span>: [</span><br><span class="line">                <span class="string">"sql-db2"</span>, <span class="string">"sql-ibase"</span>, <span class="string">"sql-mysql"</span>, <span class="string">"sql-oci"</span>, <span class="string">"sql-odbc"</span>, <span class="string">"sql-psql"</span>,</span><br><span class="line">                <span class="string">"sql-sqlite2"</span>, <span class="string">"sql-sqlite"</span>, <span class="string">"system-sqlite"</span>, <span class="string">"sql-tds"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    "summary": [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"section"</span>: <span class="string">"Qt Sql"</span>,</span><br><span class="line">            <span class="attr">"entries"</span>: [ <span class="string">"sql-sqlite"</span> ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用什么编译环境<br>我要编译<code>mingw53_32</code>和<code>android_armv7</code>的库。涉及的路径为：<br><code>C:\Qt\Qt5.11.3\5.11.3\mingw53_32\bin\qmake.exe</code>。<br><code>C:\Qt\Qt5.11.3\5.11.3\android_armv7\bin\qmake.exe</code>。  </p>
</li>
<li><p>生成Makefile文件<br>检查qmake版本<code>qmake --version</code>（以<code>mingw53_32</code>为例）。<br>切换到编译目录<code>cd /d E:\qtbase-everywhere-src-5.11.3\src\plugins\sqldrivers</code>。<br>执行配置的命令<code>qmake --</code>。<br>示例：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">E:\&gt; <span class="title">qmake</span> --<span class="title">version</span></span></span><br><span class="line"><span class="function"><span class="title">QMake</span> <span class="title">version</span> 3.0</span></span><br><span class="line"><span class="function"><span class="title">Using</span> <span class="title">Qt</span> <span class="title">version</span> 5.6.0 <span class="title">in</span> <span class="title">C</span>:/<span class="title">Program</span> <span class="title">Files</span>/<span class="title">Anaconda3</span>/<span class="title">Library</span>/<span class="title">lib</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">SET</span> <span class="title">PATH</span>=<span class="title">C</span>:\<span class="title">Qt</span>\<span class="title">Qt5</span>.11.3\5.11.3\<span class="title">mingw53_32</span>\<span class="title">bin</span>;%<span class="title">PATH</span>%</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">qmake</span> --<span class="title">version</span></span></span><br><span class="line"><span class="function"><span class="title">QMake</span> <span class="title">version</span> 3.1</span></span><br><span class="line"><span class="function"><span class="title">Using</span> <span class="title">Qt</span> <span class="title">version</span> 5.11.3 <span class="title">in</span> <span class="title">C</span>:/<span class="title">Qt</span>/<span class="title">Qt5</span>.11.3/5.11.3/<span class="title">mingw53_32</span>/<span class="title">lib</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">cd</span> /<span class="title">d</span> <span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt; <span class="title">qmake</span> --</span></span><br><span class="line"><span class="function"><span class="title">Info</span>: <span class="title">creating</span> <span class="title">stash</span> <span class="title">file</span> <span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\.<span class="title">qmake.stash</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Running</span> <span class="title">configuration</span> <span class="title">tests</span>...</span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">DB2</span> (<span class="title">IBM</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">InterBase</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">MySQL</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">OCI</span> (<span class="title">Oracle</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">ODBC</span>... <span class="title">yes</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">PostgreSQL</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">SQLite</span> (<span class="title">version</span> 2)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">TDS</span> (<span class="title">Sybase</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Done</span> <span class="title">running</span> <span class="title">configuration</span> <span class="title">tests</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Configure</span> <span class="title">summary</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Qt</span> <span class="title">Sql</span>:</span></span><br><span class="line"><span class="function">  <span class="title">SQLite</span> ................................. <span class="title">yes</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Qt</span> <span class="title">is</span> <span class="title">now</span> <span class="title">configured</span> <span class="title">for</span> <span class="title">building</span>. <span class="title">Just</span> <span class="title">run</span> '<span class="title">mingw32</span>-<span class="title">make</span>'.</span></span><br><span class="line"><span class="function"><span class="title">Once</span> <span class="title">everything</span> <span class="title">is</span> <span class="title">built</span>, <span class="title">Qt</span> <span class="title">is</span> <span class="title">installed</span>.</span></span><br><span class="line"><span class="function"><span class="title">You</span> <span class="title">should</span> <span class="title">NOT</span> <span class="title">run</span> '<span class="title">mingw32</span>-<span class="title">make</span> <span class="title">install</span>'.</span></span><br><span class="line"><span class="function"><span class="title">Note</span> <span class="title">that</span> <span class="title">this</span> <span class="title">build</span> <span class="title">cannot</span> <span class="title">be</span> <span class="title">deployed</span> <span class="title">to</span> <span class="title">other</span> <span class="title">machines</span> <span class="title">or</span> <span class="title">devices</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Prior</span> <span class="title">to</span> <span class="title">reconfiguration</span>, <span class="title">make</span> <span class="title">sure</span> <span class="title">you</span> <span class="title">remove</span> <span class="title">any</span> <span class="title">leftovers</span> <span class="title">from</span></span></span><br><span class="line"><span class="function"><span class="title">the</span> <span class="title">previous</span> <span class="title">build</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt;<span class="title">ECHO</span> %<span class="title">ERRORLEVEL</span>%</span></span><br><span class="line"><span class="function">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行编译命令<br>执行<code>mingw32-make</code>。一切顺利的话，你至少能看到：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">E:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt; <span class="title">DIR</span> /<span class="title">B</span></span></span><br><span class="line"><span class="function"><span class="title">libqsqlite.a</span></span></span><br><span class="line"><span class="function"><span class="title">libqsqlited.a</span></span></span><br><span class="line"><span class="function"><span class="title">qsqlite.dll</span></span></span><br><span class="line"><span class="function"><span class="title">qsqlited.dll</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>替换默认文件<br>Qt5.11.3的默认文件在<code>C:\Qt\Qt5.11.3\5.11.3\mingw53_32\plugins\sqldrivers\</code>目录下。备份原文件，添加新文件，即可。</p>
</li>
<li><p>测试<br>参考<a href="https://www.sqlite.org/json1.html" target="_blank" rel="noopener">The JSON1 Extension</a>自行测试。</p>
</li>
</ol>
<ul>
<li>编译Android用的库<br>命令行编译Android需求NDK，我用了<code>android-ndk-r16b-windows-x86_64.zip</code>并将其匹配到了<code>C:\android-ndk-r16b-windows-x86_64\android-ndk-r16b\toolchains\arm-linux-androideabi-4.9\prebuilt\windows-x86_64\bin\arm-linux-androideabi-g++.exe</code>。<br>此时<code>SET ANDROID_NDK_ROOT=C:\android-ndk-r16b-windows-x86_64\android-ndk-r16b</code>。<br>(可选项)我们或许还要拷贝一份<code>C:\android-ndk-r16b-windows-x86_64\android-ndk-r16b\toolchains\arm-linux-androideabi-4.9\prebuilt\windows-x86_64</code>并命名为<code>windows</code>。因为知识不够，不知道怎么做，所以只能搞一个副本以规避某些错误。<br>示例：<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">E:\&gt; <span class="title">qmake</span> --<span class="title">version</span></span></span><br><span class="line"><span class="function"><span class="title">QMake</span> <span class="title">version</span> 3.0</span></span><br><span class="line"><span class="function"><span class="title">Using</span> <span class="title">Qt</span> <span class="title">version</span> 5.6.0 <span class="title">in</span> <span class="title">C</span>:/<span class="title">Program</span> <span class="title">Files</span>/<span class="title">Anaconda3</span>/<span class="title">Library</span>/<span class="title">lib</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">SET</span> <span class="title">PATH</span>=<span class="title">C</span>:\<span class="title">Qt</span>\<span class="title">Qt5</span>.11.3\5.11.3\<span class="title">android_armv7</span>\<span class="title">bin</span>;%<span class="title">PATH</span>%</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">qmake</span> --<span class="title">version</span></span></span><br><span class="line"><span class="function"><span class="title">QMake</span> <span class="title">version</span> 3.1</span></span><br><span class="line"><span class="function"><span class="title">Using</span> <span class="title">Qt</span> <span class="title">version</span> 5.11.3 <span class="title">in</span> <span class="title">C</span>:/<span class="title">Qt</span>/<span class="title">Qt5</span>.11.3/5.11.3/<span class="title">android_armv7</span>/<span class="title">lib</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">SET</span> <span class="title">ANDROID_NDK_ROOT</span>=<span class="title">C</span>:\<span class="title">android</span>-<span class="title">ndk</span>-<span class="title">r16b</span>-<span class="title">windows</span>-<span class="title">x86_64</span>\<span class="title">android</span>-<span class="title">ndk</span>-<span class="title">r16b</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">REM</span> 请先了解下面的这个 <span class="title">XCOPY</span> /<span class="title">FRYE</span> 命令, 或者先跳过它, 继续后面的命令.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">echo</span> <span class="title">D</span> | <span class="title">XCOPY</span> /<span class="title">FRYE</span> <span class="title">C</span>:\<span class="title">android</span>-<span class="title">ndk</span>-<span class="title">r16b</span>-<span class="title">windows</span>-<span class="title">x86_64</span>\<span class="title">android</span>-<span class="title">ndk</span>-<span class="title">r16b</span>\<span class="title">toolchains</span>\<span class="title">arm</span>-<span class="title">linux</span>-<span class="title">androideabi</span>-4.9\<span class="title">prebuilt</span>\<span class="title">windows</span>-<span class="title">x86_64</span>  <span class="title">C</span>:\<span class="title">android</span>-<span class="title">ndk</span>-<span class="title">r16b</span>-<span class="title">windows</span>-<span class="title">x86_64</span>\<span class="title">androi</span></span></span><br><span class="line"><span class="function"><span class="title">d</span>-<span class="title">ndk</span>-<span class="title">r16b</span>\<span class="title">toolchains</span>\<span class="title">arm</span>-<span class="title">linux</span>-<span class="title">androideabi</span>-4.9\<span class="title">prebuilt</span>\<span class="title">windows</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\&gt; <span class="title">cd</span> /<span class="title">d</span> <span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt; <span class="title">qmake</span> --</span></span><br><span class="line"><span class="function"><span class="title">Info</span>: <span class="title">creating</span> <span class="title">stash</span> <span class="title">file</span> <span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\.<span class="title">qmake.stash</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Running</span> <span class="title">configuration</span> <span class="title">tests</span>...</span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">DB2</span> (<span class="title">IBM</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">InterBase</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">MySQL</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">OCI</span> (<span class="title">Oracle</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">ODBC</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">PostgreSQL</span>... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">SQLite</span> (<span class="title">version</span> 2)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Checking</span> <span class="title">for</span> <span class="title">TDS</span> (<span class="title">Sybase</span>)... <span class="title">no</span></span></span><br><span class="line"><span class="function"><span class="title">Done</span> <span class="title">running</span> <span class="title">configuration</span> <span class="title">tests</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Configure</span> <span class="title">summary</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Qt</span> <span class="title">Sql</span>:</span></span><br><span class="line"><span class="function">  <span class="title">SQLite</span> ................................. <span class="title">yes</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Qt</span> <span class="title">is</span> <span class="title">now</span> <span class="title">configured</span> <span class="title">for</span> <span class="title">building</span>. <span class="title">Just</span> <span class="title">run</span> '<span class="title">mingw32</span>-<span class="title">make</span>'.</span></span><br><span class="line"><span class="function"><span class="title">Once</span> <span class="title">everything</span> <span class="title">is</span> <span class="title">built</span>, <span class="title">Qt</span> <span class="title">is</span> <span class="title">installed</span>.</span></span><br><span class="line"><span class="function"><span class="title">You</span> <span class="title">should</span> <span class="title">NOT</span> <span class="title">run</span> '<span class="title">mingw32</span>-<span class="title">make</span> <span class="title">install</span>'.</span></span><br><span class="line"><span class="function"><span class="title">Note</span> <span class="title">that</span> <span class="title">this</span> <span class="title">build</span> <span class="title">cannot</span> <span class="title">be</span> <span class="title">deployed</span> <span class="title">to</span> <span class="title">other</span> <span class="title">machines</span> <span class="title">or</span> <span class="title">devices</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Prior</span> <span class="title">to</span> <span class="title">reconfiguration</span>, <span class="title">make</span> <span class="title">sure</span> <span class="title">you</span> <span class="title">remove</span> <span class="title">any</span> <span class="title">leftovers</span> <span class="title">from</span></span></span><br><span class="line"><span class="function"><span class="title">the</span> <span class="title">previous</span> <span class="title">build</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">E</span>:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt;<span class="title">ECHO</span> %<span class="title">ERRORLEVEL</span>%</span></span><br><span class="line"><span class="function">0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>如果<code>mingw32-make</code>顺利的话，应当能看到：<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">E:\<span class="title">qtbase</span>-<span class="title">everywhere</span>-<span class="title">src</span>-5.11.3\<span class="title">src</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>\<span class="title">plugins</span>\<span class="title">sqldrivers</span>&gt; <span class="title">DIR</span> /<span class="title">B</span></span></span><br><span class="line"><span class="function"><span class="title">libqsqlite.so</span></span></span><br></pre></td></tr></table></figure></p>
<p>Qt5.11.3的默认文件在<code>C:\Qt\Qt5.11.3\5.11.3\android_armv7\plugins\sqldrivers\</code>目录下。备份原文件，添加新文件，即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zx9229.github.io/2019/05/19/Qt5-11-3编译SQLite开启JSON扩展/" data-id="ck1fcg87d002olkprdvtjlts8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQLite/">SQLite</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/05/28/MySQL创建日志数据库表打印日志/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          MySQL创建日志数据库表打印日志
        
      </div>
    </a>
  
  
    <a href="/2019/05/13/Batch-Windows-相关/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Batch[Windows]相关</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/shell/">shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/MSVC/">MSVC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyDefaultCategory/">MyDefaultCategory</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Qt/">Qt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/RaspberryPi/">RaspberryPi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/MySQL/">MySQL</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/MSVC/">MSVC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/powershell/">powershell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kali/">kali</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/Ansible/">Ansible</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/svn/">svn</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/">软件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/金融相关/">金融相关</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt/">Qt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/">SQLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库客户端/">数据库客户端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件管理/">文件管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记软件/">笔记软件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Qt/" style="font-size: 20px;">Qt</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/数据库客户端/" style="font-size: 15px;">数据库客户端</a> <a href="/tags/文件管理/" style="font-size: 10px;">文件管理</a> <a href="/tags/笔记软件/" style="font-size: 15px;">笔记软件</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/06/Hexo在project类型的GitHub-Pages-site的使用/">Hexo在project类型的GitHub-Pages-site的使用</a>
          </li>
        
          <li>
            <a href="/2019/09/25/SQLserver相关记录/">SQLserver相关记录</a>
          </li>
        
          <li>
            <a href="/2019/09/23/git出现-master-REBASE-1-1/">git出现(master|REBASE 1/1)</a>
          </li>
        
          <li>
            <a href="/2019/09/19/同花顺免费版/">同花顺免费版</a>
          </li>
        
          <li>
            <a href="/2019/09/10/东方财富终端-经典版-公式/">东方财富终端-经典版-公式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 zx9229<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>